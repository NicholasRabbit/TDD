<html><!--
 Page saved with SingleFile 
 url: http://wiki.c2.com/?ObjectMother 
 saved date: Tue May 14 2024 15:07:06 GMT+0800 (China Standard Time)
--><meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1.0">
<style>.page{width:500px;margin:15px;padding:15px;word-wrap:break-word;box-shadow:10px 10px 30px 10px rgba(0,0,0,.1);background-color:white}h1{display:flex;align-items:baseline}h1 span{display:inline-block;margin:0 0 0 10px}img{max-width:500px}a{text-decoration:none}ol{padding-left:1em}</style>
<title>Object Mother</title><meta name=referrer content=no-referrer><link rel=icon href=data:image/gif;base64,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><style>.sf-hidden{display:none!important}</style><link rel=canonical href=http://wiki.c2.com/?ObjectMother><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style></head>
<body data-new-gr-c-s-check-loaded=14.1172.0 data-gr-ext-installed>
<noscript>
  <center>
    <b>notice</b>
    <p>javascript required to view this site</p>
    <b>why</b>
    <p>measured improvement in server performance</p>
    <p>awesome incremental search</p>
  </center>
</noscript>
 
<div id=tab><div class=page data-title=ObjectMother style=left:0px;top:0px;position:absolute><h1><img src="data:image/gif;base64,R0lGODlhTwBMAPAAAAAAAP///yH5BAEAAAEALAAAAABPAEwAAAL+jA95phu9gJu02muTdDt2BmXUB04hVnKkppLm6p6Pe7HcC9MIHfeo+gq2ZKldDpiRdGRMnkZ5M42EleeyisM1pcho7TnjtkZgaCy6SZvDU4UzW7VCb+u6nIgQnXWz+R7rx/CAMudBhkcl+LM4JaJFiMUo6WUUZ+MYMZkUSXZo1Uip6YHYmQQmJkqIx8cHIjcotgI76MY0u1hoysITane5UwOo2fpDXDSMXJxKZEzbrJiJ23oa/PULivE8hpoH+KnNOM3ZrfrZRR6aCqn8KhgYPUStpz7UR3ub2yafeItOn40tW6FabtyBS+ZPV55VwA4q4xbvCqkwSvb9O/fIEK7+Pnfo2ZqUT6CRXYrSuLvXz5U5SyBDEHxVkGTBTBUnMtTBTOaaezsNxdyk5Zq9dRjZwGMHxygwVRBTCgWq0RW/ONsqpfvC79rToie2hDsyqipUqRi3Ug1rNa2psr/MTvUadeyxuUoFnoE4se7QpSPDvS21Fm1culivdkUkVOthcLwMs8qZlKyjiqBMOuNYJjHctHe+yWKjpnNmnJtTdKzj9GJgwSphjlNtN3JrbXdhqx3s7Fle1Rb39gVp2xJpTy2bDltJJwir1ilPohbdefXveq6N57JMuGjJiM0d4i6WGNr0gOITNrf7pvRr4F8RJ8zbmCn4rTF9APR7dWHN+06VauMz7wl0ZmHXxCmuYddUTafJ952BNvT0X2rGAUZTf8EttMw0u6nzkSS+XLehKG98RZFBH7jlkX+61ELHJb1d5MOHnsU2m4TP8VQeZgKiyFlHOi5IWUi7RCdZOfFgwleS2WlHo4fkOWVMeE/xKJZe6tUzikVUpqPYVFX+uJiHh71FjGInhulklVeyJo9mjKnIYVu2FQAAOw=="><div><span style=color:blue;cursor:pointer>Object Mother</span></div></h1><div></div>As described by <a href=http://wiki.c2.com/?PeterSchuh>PeterSchuh</a> on <a href=http://wiki.c2.com/?IeeeSoftware>IeeeSoftware</a>: <em>Through a handful of simple method calls, this utility provided a complete, valid, and customizable structure of business objects (think of an invoice: its lines, all related charges, remit to, bill to).</em>
<p></p>
<a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> starts with the factory pattern, by delivering prefabricated test-ready objects via a simple method call. It moves beyond the realm of the factory by 
<ol><li> facilitating the customization of created objects,
<li> providing methods to update the objects during the tests, and
<li> if necessary, deleting the object from the database at the completion of the test.
<p></p>
</ol>Some reasons to use <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a>:
<ol><li> Reduce code duplication in tests, increasing test maintainability
<li> Make test objects super-easily accessible, encouraging developers to write more tests.
<li> Every test runs with fresh data.
<li> Tests always clean up after themselves.
<p></p>
</ol>The latest paper available on this topic can be found at <a href=http://www.junit.org/news/article/patterns/ rel=nofollow target=_blank>http://www.junit.org/news/article/patterns/</a> (<a href=http://www.xpuniverse.com/2001/pdfs/Testing03.pdf rel=nofollow target=_blank>http://www.xpuniverse.com/2001/pdfs/Testing03.pdf</a>).
<hr>
Has anyone tried this pattern in practice? What was your experience? It appears to be geared mostly towards mutable objects.
<hr>
Yes, the pattern is not as elegant as intended with <a href=http://wiki.c2.com/?ImmutableObject>ImmutableObject</a><strong></strong>s. If your objects are void of setters, you are driven towards having multiple factory methods that create instances of your test object. These factory methods have to take all the variant parameters in their method signature. This is not entirely bad, but it can leads to having a fairly long list of chained methods. In a way, it sounds like the original white paper calls for setters as part of the contract for this pattern. Thus, <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a><strong></strong>s with <a href=http://wiki.c2.com/?ImmutableObject>ImmutableObject</a><strong></strong>s is probably diverging from the pattern.
<p></p>
Another problem I've run into is with <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a><strong></strong>s that call other <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a><strong></strong>s. If you're not careful to minimize your <a href=http://wiki.c2.com/?TestGranularity>TestGranularity</a>, this can lead to a <a href=http://wiki.c2.com/?DebuggingNightmare>DebuggingNightmare</a>. 
<p></p>
-- <a href=http://wiki.c2.com/?JavidJamae>JavidJamae</a>
<hr>
We use this pattern in testing. It is good because we can create the User object and then set state on it. Usualy you need to pass access permisison tests to change certain fields. With the <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> pattern we can fiddle with the insides of the object.
-- R. Keene
<hr>
<p></p>
Actually this should be called an <a href=http://wiki.c2.com/?AntiPattern>AntiPattern</a>. In practice all those I've seen that have advocated this approach return shamefaced a few months later. This pattern is a bit like the other well known pattern "putting everything in one place" (<a href=http://wiki.c2.com/?GodClass>GodClass</a>), and what it is that is actually being created is quite non-obvious. The <a href=http://wiki.c2.com/?BuilderPattern>BuilderPattern</a> might be more useful...
-- J. Richardson
<p></p>
<hr>
<p></p>
My experience is different. Could you elaborate a little more? What issues did you encounter with them (outside the Immutable problem)?
-- J. Morel
<p></p>
<em>I guess the problem is that you end up having a <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> that is also a <a href=http://wiki.c2.com/?GodClass>GodClass</a>, it has too many responsabilities... becomes huge and hard to mantain (<a href=http://wiki.c2.com/?BigBallOfMud>BigBallOfMud</a>)... perhaps the right answer is to have a different <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> for each ObjectChild class? (but then you might end up with <a href=http://wiki.c2.com/?RavioliCode>RavioliCode</a>)</em>
<p></p>
The problem is that <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> does not cope well with variability in the test data being created, except by allowing the user of the objects to modify them. That doesn't work if the <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> creates <a href=http://wiki.c2.com/?ValueObject>ValueObject</a><strong></strong>s (because <a href=http://wiki.c2.com/?ValueObjectsShouldBeImmutable>ValueObjectsShouldBeImmutable</a>). I've found it better to use the <a href=http://wiki.c2.com/?TestDataBuilder>TestDataBuilder</a> pattern (see: <a href=http://nat.truemesh.com/archives/000714.html rel=nofollow target=_blank>http://nat.truemesh.com/archives/000714.html</a>).
<p></p>
<em>I have been thinking precisely about this for the last 2 days, trying to find a way to escape from the GodObjectMother... thanks a lot for finding (or writing) that ( Test Data Builders: an alternative to the Object Mother pattern ) article.</em>
<hr>
Yes, stop building God classes: <em>I guess the problem is that you end up having a <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> that is also a <a href=http://wiki.c2.com/?GodClass>GodClass</a>, it has too many responsabilities... becomes huge and hard to mantain (<a href=http://wiki.c2.com/?BigBallOfMud>BigBallOfMud</a>)... perhaps the right answer is to have a different <a href=http://wiki.c2.com/?ObjectMother>ObjectMother</a> for each ObjectChild class? (but then you might end up with <a href=http://wiki.c2.com/?RavioliCode>RavioliCode</a>)</em>
<p></p>
<p></p>
<a href=http://wiki.c2.com/?CategoryPattern>CategoryPattern</a>, <a href=http://wiki.c2.com/?CategoryTesting>CategoryTesting</a><hr>Last edit January 10, 2012</div></div>
<grammarly-desktop-integration data-grammarly-shadow-root=true><template shadowrootmode=open><style class=sf-hidden>div.grammarly-desktop-integration{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}div.grammarly-desktop-integration:before{content:attr(data-content)}</style><div aria-label=grammarly-integration role=group tabindex=-1 class=grammarly-desktop-integration data-content='{"mode":"limited","isActive":false,"isUserDisabled":false}'></div></template></grammarly-desktop-integration><script data-template-shadow-root>(()=>{document.currentScript.remove();processNode(document);function processNode(node){node.querySelectorAll("template[shadowrootmode]").forEach(element=>{let shadowRoot = element.parentElement.shadowRoot;if (!shadowRoot) {try {shadowRoot=element.parentElement.attachShadow({mode:element.getAttribute("shadowrootmode")});shadowRoot.innerHTML=element.innerHTML;element.remove()} catch (error) {} if (shadowRoot) {processNode(shadowRoot)}}})}})()</script>